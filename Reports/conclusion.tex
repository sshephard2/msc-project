%
% ---- Conclusions and Future Work
%

\section{Conclusions and Future Work}\label{sec:conclusions}
PEPA can be used to build models of complex systems using distributed, cloud-based technologies.  Experiments can be run in the PEPA Eclipse plugin to produce steady state throughput results, and make predictions of how the real, built systems will behave under conditions of skewed demand.
	
The models are useful for qualitative prediction.  They successfully predicted:
\begin{itemize}
	\item that the microservices architecture would better isolate skewed demand from the other components.
	\item (less trivially) when a shared queue is used in combination with a distributed database, once the throughput of resources with skewed demand is choked, the throughput of the other resources was choked in proportion to the relative demand between them and the skewed resource.  This even though the model's queue size is much smaller than an actual Cloud service queue.
	\item where throughput would be routed through a distributed database when using a particular partitioning strategy.
	\item when using a distributed database with replication, there would also be throughput at the replica node, and that therefore the overall throughput of the skewed demand resource would be higher than for a distributed database without replication.
\end{itemize}

However, the models were less successful at quantitative predictions.  Simple microservices was still best at isolating demand but built system results showed that there was some impact on the other resources.  When using replication, the throughput was not spread evenly (or randomly) between database nodes, and this also meant that the system was unable to satisfy as much demand as predicted.  The models were too abstract to describe and predict the behaviour inside the database engine, or the overheads incurred by worker application design choices.  This meant that the maximum apparent database service rates for actual systems were very different for microservices and the shared queue distributed database models, despite both using the same queries against Cassandra on the same virtual machines.  This means that while the models suggested that they could be used to compare different architectures directly, and to make predictions about which would make the best use of the resources available, the real systems did not bear this out.  The models as they stand are not therefore suitable for right-sizing applications.

It is argued that the models have demonstrated potential for further work in this application area.
	
\subsection{Improved Models}

The real Cassandra database behaviour was shown to be more complex than described by these simple models.  One area of future work might be to build on the abstract database model to exhibit the true behaviour more closely.  Care must be taken however not to customise the model so much that it is no longer useful for other database implementations.

\subsection{System Experiments}

The existing models may be used for further experimentation to determine how the currently modelled technologies may be reconfigured to produce better system architectures.  Partitioning strategies normally aim to use all a distributed database's nodes equally.  In such a strategy, what is the impact of skewed demand?  Also, the shared queue led to skewed demand having a significant impact on the other resources, and a valuable subject of further study would be how other queueing strategies might isolate that demand while retaining the advantages of asynchronous middleware.  There are several queue models in \cite{RN75} that would provide a good starting point, e.g. priority queues.

\subsection{Unknown Skewed Demand}
This paper did not consider systems where the source of skewed demand was unknown in advance.  There is much interest in this problem, for example handling flash crowds in peer-to-peer file sharing networks \cite{RN230}.
An interesting area of future work might be in executing the models at runtime to use them for adaptive algorithms, e.g. to change the queueing policy on-demand.  If the models were also improved to the point that they made better quantitative predictions, then they might also be used as an elastic scaling policy and compared with the performance of other right-sizing strategies; control theory, machine learning and other model based techniques including statistical.

\subsection{New Models}
It may also be possible to use PEPA to produce models for other distributed technologies.  For example, a more `natural' microservices architecture would partition the system by operation (Book, Search, Return) with a separate database for each, as shown in Figure \ref{figure:microservices}.  In this architecture the databases maintain eventual consistency via an event streaming application e.g. using Kafka.  The model for this component may well be generalised to a model of publish/subscribe message oriented middleware.


